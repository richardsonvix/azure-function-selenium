(self.webpackChunklite=self.webpackChunklite||[]).push([[4960],{94078:(e,n,i)=>{"use strict";i.d(n,{Pk:()=>_,v:()=>E,XV:()=>x,w6:()=>b});var t=i(319),a=i.n(t),d=i(82717),o=i(93235),r=i(50207),l={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"IframeParagraph_paragraph"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Paragraph"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"type"}},{kind:"Field",name:{kind:"Name",value:"iframe"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mediaResource"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"iframeSrc"}},{kind:"Field",name:{kind:"Name",value:"iframeHeight"}},{kind:"Field",name:{kind:"Name",value:"iframeWidth"}},{kind:"Field",name:{kind:"Name",value:"title"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"layout"}},{kind:"FragmentSpread",name:{kind:"Name",value:"Markups_paragraph"}}]}}].concat(a()(r.Z.definitions))},m=i(78882),s={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"PostBodyParagraph_highlight"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Quote"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"TextParagraph_highlight"}},{kind:"FragmentSpread",name:{kind:"Name",value:"ImageParagraph_highlight"}}]}}].concat(a()(d.m8.definitions),a()(o.Zl.definitions))},u={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"PostBodyParagraph_privateNote"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Note"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"TextParagraph_privateNote"}},{kind:"FragmentSpread",name:{kind:"Name",value:"ImageParagraph_privateNote"}}]}}].concat(a()(d.hz.definitions),a()(o.T_.definitions))},c={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"PostBodyParagraph_paragraph"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Paragraph"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"type"}},{kind:"FragmentSpread",name:{kind:"Name",value:"ImageParagraph_paragraph"}},{kind:"FragmentSpread",name:{kind:"Name",value:"TextParagraph_paragraph"}},{kind:"FragmentSpread",name:{kind:"Name",value:"IframeParagraph_paragraph"}},{kind:"FragmentSpread",name:{kind:"Name",value:"MixtapeParagraph_paragraph"}},{kind:"FragmentSpread",name:{kind:"Name",value:"CodeBlockParagraph_paragraph"}}]}}].concat(a()(o.ck.definitions),a()(d.Rg.definitions),a()(l.definitions),a()(m.b.definitions),a()([{kind:"FragmentDefinition",name:{kind:"Name",value:"CodeBlockParagraph_paragraph"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Paragraph"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"codeBlockMetadata"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"lang"}},{kind:"Field",name:{kind:"Name",value:"mode"}}]}}]}}]))},k={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"ParagraphStyleGrouping_highlight"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Quote"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"PostBodyParagraph_highlight"}}]}}].concat(a()(s.definitions))},g={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"ParagraphStyleGrouping_privateNote"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Note"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"PostBodyParagraph_privateNote"}}]}}].concat(a()(u.definitions))},p={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"ParagraphLayoutGrouping_privateNote"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Note"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ParagraphStyleGrouping_privateNote"}}]}}].concat(a()(g.definitions))},f={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"ParagraphLayoutGrouping_highlight"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Quote"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ParagraphStyleGrouping_highlight"}}]}}].concat(a()(k.definitions))},h={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"PostBodySection_paragraph"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Paragraph"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PostBodyParagraph_paragraph"}}]}}].concat(a()(c.definitions))},v={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"PostBodySection_highlight"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Quote"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ParagraphLayoutGrouping_highlight"}}]}}].concat(a()(f.definitions))},N={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"PostBodySection_privateNote"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Note"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ParagraphLayoutGrouping_privateNote"}}]}}].concat(a()(p.definitions))},S=i(54975),y=i(27048),F={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"PostNotesDetails_user"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"imageId"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"username"}},{kind:"FragmentSpread",name:{kind:"Name",value:"UserAvatar_user"}}]}}].concat(a()(y.W.definitions))},P={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"PostNotesMarkers_highlight"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Quote"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"endOffset"}},{kind:"Field",name:{kind:"Name",value:"paragraphs"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"startOffset"}},{kind:"Field",name:{kind:"Name",value:"userId"}},{kind:"Field",name:{kind:"Name",value:"user"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PostNotesDetails_user"}}]}}]}}].concat(a()(F.definitions))},_={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"PostBody_bodyModel"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"RichText"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sections"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"startIndex"}},{kind:"Field",name:{kind:"Name",value:"textLayout"}},{kind:"Field",name:{kind:"Name",value:"imageLayout"}},{kind:"Field",name:{kind:"Name",value:"backgroundImage"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"originalHeight"}},{kind:"Field",name:{kind:"Name",value:"originalWidth"}}]}},{kind:"Field",name:{kind:"Name",value:"videoLayout"}},{kind:"Field",name:{kind:"Name",value:"backgroundVideo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"videoId"}},{kind:"Field",name:{kind:"Name",value:"originalHeight"}},{kind:"Field",name:{kind:"Name",value:"originalWidth"}},{kind:"Field",name:{kind:"Name",value:"previewImageId"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"paragraphs"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PostBodySection_paragraph"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"normalizedBodyModel_richText"}}]}}].concat(a()(h.definitions),a()(S.gd.definitions))},x={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"PostBody_highlight"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Quote"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"paragraphs"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"getParagraphHighlights_highlight"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PostBodySection_highlight"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PostNotesMarkers_highlight"}}]}}].concat(a()(S.W$.definitions),a()(v.definitions),a()(P.definitions))},E={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"PostBody_creator"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"PostNotesMarkers_creator"}}]}}].concat(a()([{kind:"FragmentDefinition",name:{kind:"Name",value:"PostNotesMarkers_creator"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}}]}}]))},b={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"PostBody_privateNote"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Note"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"normalizedBodyModel_privateNote"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PostBodySection_privateNote"}}]}}].concat(a()(S.EH.definitions),a()(N.definitions))}},37070:(e,n,i)=>{"use strict";i.d(n,{y:()=>ie});var t=i(67154),a=i.n(t),d=i(319),o=i.n(d),r=i(67294),l=i(33380),m=i(14646),s={display:"flex",justifyContent:"center",marginTop:"32px",marginBottom:"14px",paddingTop:"24px",paddingBottom:"10px"},u=function(e){return{backgroundColor:e.baseColor.text.darker,borderRadius:"50%",display:"inline-block",height:"3px",width:"3px"}},c={marginRight:"20px"};function k(){var e=(0,m.I)();return r.createElement("div",{className:e(s),role:"separator"},r.createElement("span",{className:e([u,c])}),r.createElement("span",{className:e([u,c])}),r.createElement("span",{className:e(u)}))}var g=i(41135),p=i(63038),f=i.n(p),h=i(50008),v=i.n(h),N=i(23450),S=i.n(N),y=i(28655),F=i.n(y),P=i(92471),_=i(17193),x=i(27048),E=i(77355),b=i(8431),D=i(31889),T=i(34135);function w(){var e=F()(["\n  fragment PostNotesDetails_user on User {\n    id\n    imageId\n    name\n    username\n    ...UserAvatar_user\n  }\n  ","\n"]);return w=function(){return e},e}function B(e){var n=e.grid.xStep;return{padding:"".concat(3*n,"px ").concat(4*n,"px ").concat(3*n,"px"),width:"400px"}}function C(e){var n=e.close,i=e.users,t=(0,m.I)(),a=r.useRef(null),d=(0,D.F)(),o=d.grid.xStep;return r.useEffect((function(){function e(){var e=a.current;if(e&&e.getBoundingClientRect){var i=e.getBoundingClientRect(),t=i.bottom,o=i.top<0||t>window.innerHeight,r=window.innerWidth<d.breakpoints.xl;(o||r)&&n()}}return T.V6.on("scroll_end",e),T.V6.on("resize_throttled",e),function(){T.V6.off("scroll_end",e),T.V6.off("resize_throttled",e)}}),[]),r.createElement("section",{ref:a,className:t(B)},r.createElement(E.x,{borderBottom:"BASE_LIGHTER",marginBottom:"-".concat(o,"px"),paddingBottom:"".concat(2*o,"px")},r.createElement(b.Lh,null,"Highlights (".concat(i.length,")"))),r.createElement(E.x,{marginLeft:"3px"},i.length&&i.map((function(e){return r.createElement(E.x,{display:"inline-block",key:e.id,marginTop:"".concat(5*o,"px"),marginRight:"".concat(5*o,"px"),width:"".concat(8*o,"px")},r.createElement(_.Yt,{hasPopover:!0,link:!0,user:e,scale:"XS"}))}))))}var I=r.memo(C),O=((0,P.Ps)(w(),x.W),i(83363)),M=i(69217),R=i(60748),L=i(25267),H=i(75880),G=i(66227),A=i(87691),V=i(29746),W=i(39202);function z(){return{border:"none",cursor:"pointer",display:"block",padding:"0px",textAlign:"left",width:"100%"}}function U(){return{left:"100%",position:"absolute",top:0}}function Y(e,n){return{marginTop:"6px",maxWidth:"100%",position:"absolute",top:"".concat(e-(n||0),"px"),whiteSpace:"nowrap",width:"100%"}}function j(e){return{marginLeft:"auto",marginRight:"auto",maxWidth:"".concat((0,V.G)(e,8,!0),"px"),position:"relative"}}function Q(){return{display:"inline-block",maxWidth:"100%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}}function Z(e,n){return"number"==typeof e.startOffset&&"number"==typeof n.startOffset?e.startOffset<n.startOffset?-1:1:-1}function X(e,n){var i=n.startOffset,t=n.endOffset,a=n.paragraphs[0].name;if(!a||"number"!=typeof i||"number"!=typeof t)return e;var d=!1,o=e[a]||[];return o.length&&(o=o.map((function(e){var a=i<=e.endOffset+1,o=e.startOffset,r=e.endOffset;return a&&(d=!0,e.highlights.push(n),r=Math.max(t,e.endOffset),o=Math.min(i,e.startOffset)),{highlights:e.highlights,endOffset:r,startOffset:o}}))),d||o.push({highlights:[n],endOffset:t,startOffset:i}),e[a]=o,e}function $(e){var n=e.children,i=e.highlightString,t=e.toggle,a=(0,m.I)();return"Top highlight"===i?r.createElement(r.Fragment,null,n):r.createElement("button",{className:a(z),onClick:function(){return t()},onMouseDown:function(e){return e.preventDefault()}},n)}function q(e){var n=e.creator,i=e.positionMap,t=e.yPosOffset,a=e.viewerEdge,d=(0,m.I)();if("number"!=typeof t)return null;var o=Array.from(i.entries());return r.createElement(L.I,{nonBlocking:!0},(function(e){return r.createElement(r.Fragment,null,o.map((function(i,o){var l=f()(i,2),m=l[0],s=l[1],u=function(e,n,i,t){var a=null==t?void 0:t.isFollowing;if(1===e.length){if("anon"===e[0].userId)return"Top highlight";if(!n)return null;if(i&&i.id===e[0].userId&&n.id!==i.id&&!a)return null;if(n&&n.id===e[0].userId)return"You highlighted";if(e[0].user&&e[0].user.name)return e[0].user.name}var d=[];if(e.forEach((function(e){if(e.user){var t=n&&n.id===e.userId,o=e.user.name,r=i&&i.id===e.userId&&(!n||n.id!==i.id&&!a);t?d.length&&"You"===d[0]||d.unshift("You"):r||!o||d.includes(o)||d.push(o)}})),!d.length)return"Top highlight";if(1===d.length)return"You"===d[0]?"You highlighted":d[0];if(2===d.length)return"".concat(d[0]," and ").concat(d[1]);var o=d.slice(0,2),r=d.length-o.length;return"".concat(o[0],", ").concat(o[1],", and ").concat(r," ").concat(S()("other",r))}(s,e,n,a);return u?r.createElement("div",{className:d(Y(m,t)),key:o},r.createElement(G.B,null,(function(e){var n=e.isVisible,i=e.hide,t=e.toggle;return r.createElement(r.Fragment,null,r.createElement($,{toggle:t,highlightString:u},r.createElement(A.F,{scale:"S"},r.createElement("span",{className:d(Q)},u))),n&&r.createElement(M.G,{boundariesElement:"document",isVisible:!0,hide:i,placement:"right",popoverRenderFn:function(){var e=new Set,n=s.map((function(n){var i=n.user;return i&&i.id&&!e.has(i.id)?(e.add(i.id),i):null})).filter(W.b);return r.createElement(I,{close:i,users:n})}},r.createElement(r.Fragment,null)))}))):null})))}))}var J=r.forwardRef((function(e,n){var i=e.creator,t=e.highlights,a=r.useContext(O.V).highlightSegments,d=r.useRef(null),l=r.useState(null),s=f()(l,2),u=s[0],c=s[1],k=(0,m.I)(),g=(0,D.F)(),p=r.useState(null),h=f()(p,2),N=h[0],S=h[1],y=r.useState(null),F=f()(y,2),P=F[0],_=F[1],x=(0,H.Pd)(i).viewerEdge;return r.useEffect((function(){var e=function(){var e=function(e,n,i){var t=new Map;if(e.size&&n.length){var a=function(e){var n=o()(e).sort(Z).reduce(X,{});return Object.values(n).reduce((function(e,n){return n&&"object"===v()(n)&&n.length?(e.push.apply(e,o()(n)),e):e}),[])}(n),d=[];a.forEach((function(n){var a=n.highlights[0],o=a.paragraphs[0].name;if(a&&"number"==typeof a.startOffset&&o){var r=e.get("".concat(o,"_").concat(a.startOffset));if(r&&r.ref&&r.ref.current){var l,m=r.ref.current.getBoundingClientRect().top+window.pageYOffset;d.length&&(l=d.find((function(e){return m<e+i.newFonts.body.lineHeight.M&&m>e||m>e-i.newFonts.body.lineHeight.M&&m<e})));var s=l||m,u=t.get(s)||[];u.length||d.push(s);var c=u.concat(n.highlights);c.length&&t.set(s,c)}}}))}return t}(a,t,g);if(c(e),"function"!=typeof n&&null!=n&&n.current&&_(n.current.offsetTop),null!=d&&d.current){var i=d.current.getBoundingClientRect().left,r=window.innerWidth-i-8*g.grid.xStep;S(r)}};T.V6.on("resize_throttled",e);var i=(0,R.x)((function(n){"iframe.resize"!==n.context&&"player.js"!==n.context||e()})).destructor;return e(),function(){T.V6.off("resize_throttled",e),i()}}),[t,a]),r.createElement("div",{className:k(j)},r.createElement(E.x,{display:"block",xs:{display:"none"},sm:{display:"none"},md:{display:"none"},lg:{display:"none"}},r.createElement("aside",{className:k(U),ref:d,style:{width:N?"".concat(N,"px"):void 0}},u&&r.createElement(q,{creator:i,highlights:t,positionMap:u,yPosOffset:P,width:N,viewerEdge:x}))))})),K=r.memo(J),ee=i(75119),ne=i(32342),ie=r.forwardRef((function(e,n){var i,t,d=e.bodyModel,s=e.creator,u=e.highlights,c=e.isAuroraPostPageEnabled,p=e.privateNotes,f=e.postBodyInserts,h=e.richTextStyle,v=void 0===h?"FULL_PAGE":h,N=e.shouldHideHighlightAnnotations,S=void 0!==N&&N,y=(0,m.I)(),F=r.createRef(),P=null===(i=r.useContext(l.u6).watchedBounds.get("byline"))||void 0===i||null===(t=i.ref)||void 0===t?void 0:t.current,_=P?P.offsetTop-48:100,x={position:"absolute",left:0,top:"calc(100vh + ".concat(_,"px)"),bottom:"calc(100vh + ".concat(100,"px)"),width:"10px",pointerEvents:"none"},E=(0,ee.Zx)().privateNoteSelection,b=r.useMemo((function(){return u&&E?[].concat(o()(u),[E]):u}),[u,E]),D=f?function(e){var n;return Object.keys(e).some((function(i){return!!e[i].find((function(e){return"BYLINE"===e.insertType}))&&(n=i,!0)})),n}(f):void 0,T=r.useMemo((function(){return(0,ne.fj)(d,{bylineParagraphName:D,highlights:b,isAuroraPostPageEnabled:c,isPostPage:!0,privateNotes:p,richTextStyle:v})}),[d,b,p,v]),w=f&&f.first;return r.createElement("section",{ref:n},r.createElement("div",{ref:F},r.createElement(r.Fragment,null,r.createElement(l.TA,{name:"ghost-track",type:"ghost",className:y(x)}),"FULL_PAGE"===v&&u&&u.length>0&&!S&&r.createElement(K,{creator:s,highlights:o()(u),ref:n}),!!w&&w.map((function(e,n){return e.component?r.createElement("div",{key:"postBodyInsertFirst_".concat(n)},e.component):null}))),T.map((function(e,n){if("HR"===e){var i,t,d=T[n-1],o=T[n+1],l="HR"!==d&&(null==d||null===(i=d.section)||void 0===i?void 0:i.backgroundImage),m="HR"!==o&&(null==o||null===(t=o.section)||void 0===t?void 0:t.backgroundImage);return l||m?null:r.createElement(k,{key:n})}return r.createElement(g.b,a()({key:e.section.name||n,postBodyInserts:f},e))}))))}))}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/4960.a78b3cf3.chunk.js.map