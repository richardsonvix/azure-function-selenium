(self.webpackChunklite=self.webpackChunklite||[]).push([[9609],{14045:(e,t,n)=>{"use strict";n.d(t,{M:()=>a});var o=n(67294),i=n(77355),r=n(93310),l=n(50458);function a(e){var t=e.entityName,n=void 0===t?"story":t;return o.createElement(i.x,{textAlign:"center"},"Deletion is not reversible, and the story will be completely deleted. If you do not want to delete, you can"," ",o.createElement(r.r,{target:"_blank",href:l.aH9,inline:!0,linkStyle:"OBVIOUS"},"unlist the ",n),".")}},24415:(e,t,n)=>{"use strict";n.d(t,{c:()=>u});var o=n(67154),i=n.n(o),r=n(6479),l=n.n(r),a=n(67294),s=n(38356),c=n(42130),u=function(e){var t=e.isResponsive,n=l()(e,["isResponsive"]);return a.createElement(s.u,i()({text:t?"More":void 0,icon:a.createElement(c.Z,null)},n))}},75150:(e,t,n)=>{"use strict";n.d(t,{T:()=>p});var o=n(67294),i=n(27517),r=n(13195),l=n(6443),a=n(39507),s=n(38352),c=n(93310),u=n(83486),d=n(43487),m=n(51681),p=function(e){var t=e.post,n=e.hidePopover,p=(0,l.H)().value,f=null==p?void 0:p.id,v=(0,a.T)(t).viewerEdge,g=(0,i.I0)(),h=o.useCallback((function(e){return g((0,u.at)(e))}),[g]),E=(0,d.b$)((function(e){return e.multiVote.clapsPerPost})),y=(0,m.l)(E,t,v),b=y.clapCount,S=y.viewerClapCount,C=(0,r.CP)();return f&&b&&S&&S>0?o.createElement(s.Sl,null,o.createElement(c.r,{onClick:function(){C(t,(null==p?void 0:p.id)||"",-S,v),h({postId:t.id,clapCount:b-S,viewerClapCount:0,viewerHasClappedSinceFetch:!0}),n()}},"Undo applause for this post")):null}},6419:(e,t,n)=>{"use strict";n.d(t,{g:()=>d,H:()=>m});var o=n(28655),i=n.n(o),r=n(92471),l=n(32493),a=n(67294),s=n(27517),c=n(78285);function u(){var e=i()(["\n  mutation UserReportStoryMutation(\n    $targetPostId: ID!\n    $targetAuthorId: ID!\n    $alsoBlockAuthor: Boolean!\n    $reason: String!\n  ) {\n    reportStoryAndMaybeBlockAuthor(\n      targetPostId: $targetPostId\n      targetAuthorId: $targetAuthorId\n      alsoBlockAuthor: $alsoBlockAuthor\n      reason: $reason\n    ) {\n      __typename\n      id\n      viewerEdge {\n        __typename\n        id\n        isBlocking\n      }\n    }\n  }\n"]);return u=function(){return e},e}var d=(0,r.Ps)(u()),m=(0,s.$j)()((function(e){var t=e.targetAuthorId,n=e.targetPostId,o=e.dispatch,i=e.children,r=e.onOptimisticComplete,s=e.isBlocking,u=e.viewerId;return a.createElement(l.m,{mutation:d,onCompleted:function(){o((0,c.Dx)({message:"Successfully reported post."}))}},(function(e){return i({mutate:function(o,i){var l=e({variables:{targetAuthorId:t,targetPostId:n,alsoBlockAuthor:o,reason:i},optimisticResponse:{__typename:"Mutation",reportStoryAndMaybeBlockAuthor:{__typename:"User",id:t,viewerEdge:{__typename:"UserViewerEdge",id:"userId:".concat(t,"-viewerId:").concat(u),isBlocking:s||o}}}});return r&&r(),l}})}))}))},31048:(e,t,n)=>{"use strict";n.d(t,{w4:()=>_,SX:()=>O});var o=n(59713),i=n.n(o),r=n(63038),l=n.n(r),a=n(28655),s=n.n(a),c=n(92471),u=n(21919),d=n(67294),m=n(25267),p=n(38352),f=n(93310),v=n(77355),g=n(1383),h=n(87691),E=n(14646),y=n(78285);function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var S=d.createElement("path",{d:"M0 .35v15.3h20V.35H0zm6.95 9.38l3.05 2.5 3.05-2.5 4.88 4.73H2.07l4.88-4.73zM1.2 13.64V5.02l4.82 3.94-4.82 4.68zm12.78-4.68l4.82-3.94v8.62l-4.82-4.68zm4.82-7.42v1.94l-8.8 7.2-8.8-7.2V1.54h17.6z"});const C=function(e){return d.createElement("svg",b({width:20,height:16,viewBox:"0 0 20 16"},e),S)};var x=n(68894);function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function P(){var e=s()(["\n  mutation sendPostAsEmails($postId: ID!) {\n    sendPostAsEmails(postId: $postId)\n  }\n"]);return P=function(){return e},e}function k(){var e=s()(["\n  fragment NewsletterV3EmailToSubscribersMenuItem_post on Post {\n    id\n    creator {\n      id\n      newsletterV3 {\n        id\n        subscribersCount\n      }\n    }\n    isNewsletter\n    isAuthorNewsletter\n  }\n"]);return k=function(){return e},e}function R(e){return{fill:e.baseColor.fill.lighter}}var A={height:"16px",width:"16px",marginLeft:"4px"},O=(0,c.Ps)(k()),D=(0,c.Ps)(P());function _(e){var t=e.post,n=e.onClick,o=e.menuStyle,i=(0,E.I)(),r=(0,x.O)(!1),a=l()(r,3),s=a[0],c=a[1],b=a[2],S=(0,y.w)(),w=function(){b(),n()},P=(0,u.D)(D,{variables:{postId:(null==t?void 0:t.id)||""},onCompleted:function(e){var t=e.sendPostAsEmails;S(t?{message:"Your story has been emailed to subscribers.",toastStyle:"MESSAGE",duration:2e3}:{message:"We couldn't process your request. Try again, or contact our support team.",toastStyle:"ERROR",duration:2e3})},update:function(e,n){var o,i={id:"Post:".concat(null==t?void 0:t.id),fragment:O,fragmentName:"NewsletterV3EmailToSubscribersMenuItem_post"},r=e.readFragment(i);e.writeFragment(I(I({},i),{},{data:I(I({},r),{},{isAuthorNewsletter:null===(o=n.data)||void 0===o?void 0:o.sendPostAsEmails})}))}}),k=l()(P,1)[0];return d.createElement(m.I,null,(function(e){var r,l,a;return e&&e.id===(null==t||null===(r=t.creator)||void 0===r?void 0:r.id)&&(null==t||!t.isNewsletter)&&((null==t||null===(l=t.creator)||void 0===l||null===(a=l.newsletterV3)||void 0===a?void 0:a.subscribersCount)||0)>0?d.createElement(d.Fragment,null,d.createElement(p.Sl,{paddingTopBottom:"8px"},d.createElement(f.r,{onClick:function(){null!=t&&t.isAuthorNewsletter?(S({message:"Youâ€™ve already sent this story to subscribers.",toastStyle:"ERROR",duration:2e3}),n()):c()}},"TEXT"===o?d.createElement(v.x,{display:"inline-block"},d.createElement(h.F,{scale:"M"},"Email to subscribers")):d.createElement(v.x,{display:"inline-block"},d.createElement(C,{className:i([R,A])}),d.createElement(v.x,{display:"inline-block",marginLeft:"20px"},d.createElement(h.F,{scale:"S"},"Email to subscribers"))))),d.createElement(g.Q,{onConfirm:function(){k(),w()},isVisible:s,hide:w,titleText:"Email to subscribers",confirmText:"Send",buttonStyle:"STRONG",buttonSize:"LARGE",showCancelButton:!0,withCloseButton:!0,isDestructiveAction:!1},"A link to this story will be emailed to all your subscribers.")):d.createElement(d.Fragment,null)}))}},16880:(e,t,n)=>{"use strict";n.d(t,{$:()=>m});var o=n(28655),i=n.n(o),r=n(92471),l=n(67294),a=n(38352),s=n(95445),c=n(78870),u=n(50458);function d(){var e=i()(["\n  fragment CopyFriendLinkMenuItem_post on Post {\n    id\n  }\n"]);return d=function(){return e},e}var m=function(e){var t=e.post,n=e.shareKey;return t&&n?l.createElement(a.Sl,null,l.createElement(s.b,{url:(0,c.Rk)((0,u.jVf)(t),{sk:n}),linkStyle:"SUBTLE"},(function(e){return e?"Copied!":"Copy Friend Link"}))):null};(0,r.Ps)(d())},76101:(e,t,n)=>{"use strict";n.d(t,{r:()=>b});var o=n(63038),i=n.n(o),r=n(67294),l=n(28655),a=n.n(l),s=n(92471),c=n(32493),u=n(27517),d=n(78285);function m(){var e=a()(["\n  mutation PostAllowResponsesMutation($targetPostId: ID!, $allowResponses: Boolean!) {\n    setPostAllowResponses(targetPostId: $targetPostId, allowResponses: $allowResponses) {\n      id\n      allowResponses\n    }\n  }\n"]);return m=function(){return e},e}var p=(0,s.Ps)(m()),f=(0,u.$j)()((function(e){var t=e.children,n=e.dispatch,o=e.onCompleted,i=e.targetPostId;return r.createElement(c.m,{mutation:p,onCompleted:function(){n((0,d.Dx)({message:"Responses are now hidden for this post."})),o&&o()},variables:{targetPostId:i,allowResponses:!1},optimisticResponse:{__typename:"Mutation",setPostAllowResponses:{__typename:"Post",id:i,allowResponses:!1}}},(function(e){return t({mutate:e})}))})),v=(0,u.$j)()((function(e){var t=e.children,n=e.dispatch,o=e.onCompleted,i=e.targetPostId;return r.createElement(c.m,{mutation:p,onCompleted:function(){n((0,d.Dx)({message:"Responses are now shown for this post."})),o&&o()},variables:{targetPostId:i,allowResponses:!0},optimisticResponse:{__typename:"Mutation",setPostAllowResponses:{__typename:"Post",id:i,allowResponses:!0}}},(function(e){return t({mutate:e})}))})),g=n(75675),h=n(38352),E=n(93310),y=n(68894),b=function(e){var t=e.hidePopover,n=e.postId,o=e.allowResponses,l=(0,y.O)(!1),a=i()(l,3),s=a[0],c=a[1],u=a[2],d=function(){u(),t()};return r.createElement(r.Fragment,null,r.createElement(f,{targetPostId:n},(function(e){var t=e.mutate;return r.createElement(g.w,{onConfirm:t,isVisible:s,hide:d,entityTypename:"Post"})})),r.createElement(v,{targetPostId:n},(function(e){var t=e.mutate;return r.createElement(h.Sl,null,r.createElement(E.r,{onClick:function(){o?c():t()}},o?"Hide responses":"Show responses"))})))}},79609:(e,t,n)=>{"use strict";n.d(t,{Z:()=>Ce});var o=n(67154),i=n.n(o),r=n(63038),l=n.n(r),a=n(48403),s=n.n(a),c=n(67294),u=n(14045),d=n(24415),m=n(75150),p=n(65331),f=n(32947),v=n(87166),g=n(66021),h=n(90833),E=n(31048),y=n(16880),b=n(76101),S=n(75412),C=n(71652),x=n(319),w=n.n(x),I=n(84683),P={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"CollectionSubmissionOption_collection"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Collection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"slug"}},{kind:"FragmentSpread",name:{kind:"Name",value:"CollectionAvatar_collection"}}]}}].concat(w()(I.d.definitions))},k={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"CollectionSubmissionPopoverQuery"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"viewer"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"writerCollections"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"CollectionSubmissionOption_collection"}}]}},{kind:"Field",name:{kind:"Name",value:"adminCollections"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"CollectionSubmissionOption_collection"}}]}}]}}]}}].concat(w()(P.definitions))},R=n(8981),A=n(25267),O=n(38352),D=n(77355),_=n(93310),T=n(91583),F=n(47230),B=n(66227),V=n(73917),N=n(70310),$=n(87691),M=n(20113),L=n(90586),j=n(34135),U="collectionSubmissionPopover",z=[{name:"",value:"No publication",content:c.createElement(D.x,{height:"32px",display:"flex",alignItems:"center",marginLeft:"5px"},c.createElement($.F,{scale:"M",color:"DARKER"},"No publication"))}];function H(e){var t=e.collection;return t.name?c.createElement(D.x,{display:"flex",justifyContent:"space-between",width:"200px",alignItems:"center",marginLeft:"5px"},c.createElement($.F,{scale:"M",color:"DARKER"},t.name),c.createElement(C.v,{collection:t,size:32})):null}function K(e){var t=e.show,n=e.post,o=n.statusForCollection,i=n.isPublished,r=c.useState(!1),a=l()(r,2),s=a[0],u=a[1];return s||j.V6.on("load",(function(){return u(!0)})),!o&&i&&s?c.createElement(Q,{post:n,noQueryReturn:null},(function(e){var o=e.loading,i=e.error,r=e.data;if(o||i)return null;var l=(void 0===r?{viewer:void 0}:r).viewer,a=n.creator;if(!l||!a||l.id!==a.id)return null;var s=l.adminCollections,u=l.writerCollections;return 0===s.length&&0===u.length?null:c.createElement(O.Sl,null,c.createElement(_.r,{"aria-controls":U,"aria-expanded":"false",onClick:t},"Add to publication"))})):null}function G(e){var t=e.isVisible,n=e.hide;return c.createElement(T.V,{isVisible:t,hide:n,withCloseButton:!0},c.createElement(D.x,{display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",maxWidth:"480px"},c.createElement(M.X6,{scale:"M",tag:"h3"},"Story submitted"),c.createElement(D.x,{paddingTop:"8px",paddingBottom:"24px"},c.createElement(L.QE,{scale:"M"},"Weâ€™ll email you when the publication editor has reviewed your submission.")),c.createElement(F.z,{buttonStyle:"OBVIOUS",onClick:n},"OK")))}var Q=function(e){var t=e.children,n=e.post,o=e.noQueryReturn,i=n.creator;return i?c.createElement(A.I,null,(function(e){return e?e.id!==i.id?o:c.createElement(S.A,{query:k,ssr:!1},(function(e){var n=e.loading,o=e.error,i=e.data;return t({loading:n,error:o,data:i})})):o})):o},W=function(e){var t=e.post,n=e.hide,o=e.showLoadingIndicator,i=e.isVisible,r=e.children,a=c.useState(!1),s=l()(a,2),u=s[0],d=s[1],m=c.useState(""),p=l()(m,2),f=p[0],v=p[1],g=(0,R.h3)(t),h=(0,R.Lf)(t);return u||j.V6.on("load",(function(){return d(!0)})),t.isPublished&&u?c.createElement(B.B,null,(function(e){var l=e.isVisible,a=e.hide,s=e.show;return c.createElement(c.Fragment,null,c.createElement(G,{hide:a,isVisible:l}),c.createElement(Q,{post:t,noQueryReturn:r},(function(e){var l=e.loading,a=e.error,u=e.data;if(l||a)return r;var d=(void 0===u?{viewer:void 0}:u).viewer,m=t.creator;if(!d||!m||d.id!==m.id)return r;var p=d.adminCollections,E=d.writerCollections;if(0===p.length&&0===E.length)return r;var y=p.concat(E).filter((function(e){return!!e&&!!e.slug&&!!e.name})).map((function(e){return{name:e.slug||"",value:e.name||"",content:c.createElement(H,{collection:e})}})),b=z.concat(y),S=p.reduce((function(e,t){return e[t.slug||""]=t,e}),{}),C=E.reduce((function(e,t){return e[t.slug||""]=t,e}),{}),x="";if(f){var w=b.find((function(e){return e.name===f}));w&&(x=w.value)}var I="addStoryToPublicationTitle";return c.createElement(V.J,{ariaId:U,hide:n,isVisible:i,popoverRenderFn:function(){return c.createElement(D.x,{padding:"20px",width:"280px",display:"flex",flexDirection:"column"},c.createElement($.F,{scale:"M",color:"DARKER",ariaLabelledById:I},"Add your story to a publication:"),c.createElement(D.x,{marginTop:"10px",position:"relative"},c.createElement(D.x,{position:"absolute",height:"16px",width:"100%",bottom:"0",zIndex:"100",backgroundImage:"linear-gradient(transparent, #ffffff)"}),c.createElement(D.x,{maxHeight:"160px",overflow:"auto"},c.createElement(N.E,{value:x,onChange:v,options:b,radioButtonsName:"addStory",ariaLabelledBy:I}))),c.createElement(D.x,{display:"flex",marginTop:"20px"},f in S?c.createElement(F.z,{onClick:function(){var e=S[f];n(),o(),g(e).then((function(){window.location.reload()}))},buttonStyle:"OBVIOUS"},"Add story"):c.createElement(F.z,{onClick:function(){var e=C[f];h(e),n(),s()},disabled:!f},"Submit"),c.createElement(D.x,{marginLeft:"10px"},c.createElement($.F,{scale:"M",color:"LIGHTER"},c.createElement(_.r,{onClick:n},c.createElement(D.x,{padding:"10px"},"Cancel"))))),c.createElement(D.x,{marginTop:"10px"},c.createElement($.F,{scale:"M"},"This story will be automatically submitted to the publication. When you submit your story, the publication's editors will be notified and will be able to edit your story.")))}},r)})))})):r},X=n(27517),Y=n(78285),Z=function(e){var t=e.children,n=e.isVisible,o=e.post,i=e.hide,r=e.showLoadingIndicator,l=(0,R.h3)(o),a=(0,R.yb)(o),s=(0,X.I0)(),u=o.pendingCollection;return u?c.createElement(V.J,{ariaId:"manageSubmissionPopover",isVisible:n,hide:i,popoverRenderFn:function(){return c.createElement(D.x,{padding:"16px",maxWidth:"280px"},c.createElement(D.x,{display:"flex",flexDirection:"row",alignItems:"center"},c.createElement(D.x,{paddingRight:"8px"},c.createElement(C.v,{collection:u,size:40})),c.createElement($.F,{scale:"S"},"This draft is submitted to ",u.name,".")),c.createElement(D.x,{flexDirection:"row",display:"flex",paddingTop:"16px"},c.createElement(D.x,{paddingRight:"8px"},c.createElement(F.z,{buttonStyle:"OBVIOUS",onClick:function(){i(),r(),l(o.pendingCollection).then((function(){window.location.reload()}))}},"Accept")),c.createElement(F.z,{buttonStyle:"SUBTLE",onClick:function(){a(o.pendingCollection).then((function(){s((0,Y.Dx)({message:"Story removed from ".concat(u.name||"publication")}))})),i()}},"Don't accept")))}},t):t},q=function(e,t){return t&&e.creator&&t.id===e.creator.id},J=n(67701),ee="removeFromPublicationPopover",te=function(e){var t=e.viewer,n=e.show,o=e.post,i=(0,J.gY)(o.pendingCollection||o.collection).viewerEdge,r=null==i?void 0:i.isEditor;return t&&("APPROVED"===o.statusForCollection&&(r||function(e,t){var n=e.pendingCollection||e.collection;return n&&n.creator&&t.id===n.creator.id}(o,t)||q(o,t))||"PENDING"===o.statusForCollection&&q(o,t))?c.createElement(O.Sl,null,c.createElement(_.r,{"aria-controls":ee,"aria-expanded":"false",onClick:n},"Remove story from publication")):null},ne=function(e){var t=e.children,n=e.isVisible,o=e.hide,i=e.post,r=e.viewer,l=(0,X.I0)(),a=(0,R.yb)(i),s=i.collection||i.pendingCollection;return s?c.createElement(V.J,{ariaId:ee,isVisible:n,hide:o,popoverRenderFn:function(){return c.createElement(D.x,{padding:"16px",maxWidth:"280px"},c.createElement(D.x,{display:"flex",flexDirection:"row",alignItems:"center"},c.createElement(D.x,{paddingRight:"8px"},c.createElement(C.v,{collection:s,size:40})),"APPROVED"===i.statusForCollection?c.createElement($.F,{scale:"S"},q(i,r)?"Your":"This"," story is published in"," ",s.name,"."):"PENDING"===i.statusForCollection?c.createElement($.F,{scale:"S"},"Your story is being reviewed by ",s.name," editors."):c.createElement($.F,{scale:"S"},"This draft is submitted to ",s.name)),c.createElement(D.x,{flexDirection:"row",display:"flex",paddingTop:"16px"},c.createElement(D.x,{paddingRight:"8px"},c.createElement(F.z,{buttonStyle:"SUBTLE",onClick:function(){a(s).then((function(){l((0,Y.Dx)({message:"Story removed from ".concat(s.name||"publication")}))}),(function(){l((0,Y.Dx)({message:"There was a problem removing the story from ".concat(s.name||"publication"),toastStyle:"ERROR"}))})),o()}},"PENDING"===i.statusForCollection?"Cancel submission":"Remove from ".concat(s.name||"")))))}},t):t},oe=n(43220),ie=n(48502),re=n(74302),le=n(36405),ae=n(6443),se=n(39507),ce=n(18733),ue=n(26350),de=n(13256),me=n(75765),pe=n(37774),fe=n(1383),ve=n(14646),ge=n(92661),he=n(75221),Ee=n(43487),ye=n(43303),be=n(68894),Se=n(50458),Ce=function(e){var t,n,o=e.creator,r=e.post,a=e.collection,S=e.showLoadingIndicator,C=e.setIsAuthorOrPubMuted,x=e.setMutedAuthorId,w=e.setMutedPubId,I=e.isMutingFromHomeFeed,P=e.hideUndoApplause,k=void 0!==P&&P,R=e.isResponsive,A=e.popoverPositioningStrategy,T=e.hideAddToList,F=void 0===T||T,B=e.hideOnScroll,N=c.useState(!1),$=l()(N,2),M=$[0],L=$[1],j=c.useState(!1),U=l()(j,2),z=U[0],H=U[1],G=c.useState(!1),Q=l()(G,2),X=Q[0],q=Q[1],ee=(0,ve.I)(),Ce=(0,ce.Uo)(),xe=r.allowResponses,we=r.pendingCollection,Ie=r.mediumUrl,Pe=r.visibility,ke=(0,J.gY)(a).viewerEdge,Re=(0,J.gY)(we).viewerEdge,Ae=(0,se.T)(r).viewerEdge,Oe=(0,Y.w)(),De=(0,ae.H)().value,_e=null==De?void 0:De.id,Te=r.responseDistribution===he.Et.DISTRIBUTED,Fe=!!r.inResponseToPostResult||!!r.inResponseToCatalogResult,Be=Fe?"response":"story",Ve=(0,ie.KQ)(r),Ne=l()(Ve,2),$e=Ne[0],Me=Ne[1],Le=(0,oe.UL)(r.collection),je=(0,oe.UL)(r.creator),Ue=c.useCallback((function(e){var t;Oe({extraParams:{collectionName:(null===(t=r.collection)||void 0===t?void 0:t.name)||"",becamePinned:!!e.data.setPinnedAt.pinnedAt},toastStyle:"POST_PINNED_TO_COLLECTION_HOMEPAGE"})}),[null===(t=r.collection)||void 0===t?void 0:t.name]),ze=c.useCallback((function(e){Oe({message:e.data.postSetPinnedByCreatorAt.pinnedByCreatorAt?"This ".concat(Be," has been pinned to your profile's homepage"):"This ".concat(Be," has been unpinned from your profile's homepage")})}),[]),He=c.useCallback((function(){Me().then(Ue)}),[Me,Ue,null==r||null===(n=r.collection)||void 0===n?void 0:n.name]),Ke=(0,ie.In)(r),Ge=l()(Ke,2),Qe=Ge[0],We=Ge[1],Xe=c.useCallback((function(){We().then(ze)}),[We,ze]),Ye=(0,Ee.v9)((function(e){return e.config.authDomain})),Ze=c.useState(!1),qe=l()(Ze,2),Je=qe[0],et=qe[1],tt=(0,be.O)(!1),nt=l()(tt,3),ot=nt[0],it=nt[1],rt=nt[2],lt=(0,be.O)(!1),at=l()(lt,4),st=at[0],ct=at[2],ut=at[3],dt=(0,v.j)(r.id),mt=l()(dt,1)[0],pt=(0,be.O)(!1),ft=l()(pt,3),vt=ft[0],gt=ft[1],ht=ft[2],Et=(0,ge.qt)("ShowHome",{}),yt=c.useCallback((function(){mt().then((function(){window.location.assign(Et)}))}),[mt,Et]),bt="Delete story";Te?bt="Delete story and response":Fe&&(bt="Delete response");var St=Te?re.Q:c.createElement(u.M,{entityName:Be}),Ct=(0,le.P5)("can_edit_members_only_posts");if(!o||!De)return null;var xt=_e===o.id,wt=(null==ke?void 0:ke.isEditor)||(null==Re?void 0:Re.isEditor),It=xt||wt,Pt=Ct&&r&&r.isLocked,kt=It||Pt,Rt="creatorActionOverflowMenu",At="LOCKED"===Pe,Ot=wt&&!xt||!It,Dt=!Fe||Te,_t=function(){Te&&(ct(),it())};if(Je)return c.createElement(h.l,{to:(0,Se.d0A)(Ye,r.id)});var Tt={kind:he.ej.POST,target:r};return c.createElement(c.Fragment,null,c.createElement(fe.Q,{buttonStyle:"STRONG",cancelText:"Cancel",isVisible:ot,onConfirm:function(){et(!0)},hide:rt,titleText:"Edit story and response",confirmText:"Continue",isDestructiveAction:!1},re.t),c.createElement(fe.Q,{buttonStyle:"ERROR",cancelText:"Cancel",isVisible:vt,onConfirm:yt,hide:ht,titleText:bt,confirmText:"Delete",isDestructiveAction:!0},St),c.createElement(p.a,i()({},Tt,{viewer:De}),(function(e){var t=e.onClick;return c.createElement(V.J,{targetDistance:10,ariaId:Rt,isVisible:st,hide:ct,positioningStrategy:A,hideOnOutsideClick:!0,hideOnScroll:B,popoverRenderFn:function(){return c.createElement(O.mX,null,c.createElement(c.Fragment,null,c.createElement(f.l,{type:"popover",handleClick:_t,href:(0,Se.d0A)(Ye,r.id),isVisible:!!kt},"Edit ",Be),a&&wt&&Le&&Dt&&c.createElement(O.Sl,null,c.createElement(_.r,{onClick:He},$e?"Unpin this ".concat(Be," from "):"Pin this ".concat(Be," to "),a.name)),xt&&je&&Dt&&c.createElement(O.Sl,null,c.createElement(_.r,{onClick:Xe},Qe?"Unpin this ".concat(Be," from your profile"):"Pin this ".concat(Be," to your profile"))),c.createElement(E.w4,{post:r,onClick:ct,menuStyle:"TEXT"}),It?c.createElement(c.Fragment,null,c.createElement(O.oK,null),c.createElement(O.Sl,null,c.createElement(_.r,{href:(0,Se.KIb)(Ye,r.id)},s()(Be)," settings"))):null,It&&c.createElement(O.Sl,null,c.createElement(_.r,{href:(0,Se.T0G)(Ye,r.id)},s()(Be)," stats")),It&&At&&Ie&&(null==Ae?void 0:Ae.shareKey)&&c.createElement(y.$,{post:r,shareKey:null==Ae?void 0:Ae.shareKey}),It&&c.createElement(O.oK,null),It?c.createElement(c.Fragment,null,c.createElement(b.r,{hidePopover:ct,postId:r.id,allowResponses:xe}),!F&&c.createElement(O.Sl,null,c.createElement(_.r,{"aria-controls":Rt,"aria-expanded":"false",onClick:function(e){ct(),t(e)}},"Add to list")),c.createElement(K,{post:r,show:function(){H(!0),ct()}}),c.createElement(te,{viewer:De,post:r,show:function(){q(!0),ct()}}),xt&&c.createElement(O.Sl,null,c.createElement("div",{className:ee({color:Ce.baseTheme.errorColor})},c.createElement(_.r,{onClick:(0,ye.B)(ct,gt)},"Delete ",Be)))):null,Ot?c.createElement(c.Fragment,null,wt&&c.createElement(O.oK,null),!k&&c.createElement(m.T,{post:r,hidePopover:ct}),c.createElement(c.Fragment,null,_e?c.createElement(pe.z,{targetUserId:o.id,postId:r.id,hidePopover:ct,viewerId:_e}):c.createElement(O.Sl,null,c.createElement(ue.R,{operation:"register",post:r,susiEntry:"report_footer"},"Report this ",Be))),c.createElement(g.q,{hidePopover:ct,creator:o,collection:a,postId:r.id,setIsAuthorOrPubMuted:C,setMutedAuthorId:x,setMutedPubId:w,isMutingFromHomeFeed:I}),c.createElement(de.F,{hidePopover:ct,creator:o,viewer:De}),c.createElement(me.j,{hidePopover:ct,creator:o,viewer:De})):null))}},c.createElement(W,{post:r,isVisible:z,hide:function(){H(!1)},showLoadingIndicator:S},c.createElement(ne,{viewer:De,post:r,isVisible:X,hide:function(){q(!1)}},c.createElement(Z,{post:r,isVisible:M,hide:function(){L(!1)},showLoadingIndicator:S},c.createElement(D.x,{flexGrow:"0",marginRight:"-4px"},c.createElement(d.c,{"aria-controls":Rt,"aria-expanded":st?"true":"false","aria-label":"More options",onClick:function(){M?L(!1):z?H(!1):ut()},isResponsive:R}))))))})))}},8981:(e,t,n)=>{"use strict";n.d(t,{Lf:()=>v,h3:()=>g,yb:()=>h});var o=n(63038),i=n.n(o),r=n(28655),l=n.n(r),a=n(92471),s=n(21919),c=n(67294),u=n(97217);function d(){var e=l()(["\n  mutation RejectPostFromPubMutation(\n    $postId: ID!\n    $collectionSlug: String!\n    $status: CollectionPostStatus!\n  ) {\n    manageCollectionPostStatus(postId: $postId, collectionSlug: $collectionSlug, status: $status) {\n      __typename\n      id\n      statusForCollection\n      collection {\n        id\n      }\n      pendingCollection {\n        id\n        slug\n      }\n    }\n  }\n"]);return d=function(){return e},e}function m(){var e=l()(["\n  mutation ManageCollectionPostStatusMutation(\n    $postId: ID!\n    $collectionSlug: String!\n    $status: CollectionPostStatus!\n  ) {\n    manageCollectionPostStatus(postId: $postId, collectionSlug: $collectionSlug, status: $status) {\n      __typename\n      id\n      statusForCollection\n      pendingCollection {\n        id\n        slug\n      }\n    }\n  }\n"]);return m=function(){return e},e}var p=(0,a.Ps)(m()),f=(0,a.Ps)(d()),v=function(e){var t=(0,s.D)(p),n=i()(t,1)[0];return(0,c.useCallback)((function(t){return n({variables:{collectionSlug:(null==t?void 0:t.slug)||"",postId:e.id,status:u.Zj.PENDING},optimisticResponse:{manageCollectionPostStatus:{__typename:"Post",id:e.id,statusForCollection:u.Zj.PENDING,pendingCollection:t}}})}),[e])},g=function(e){var t=(0,s.D)(p),n=i()(t,1)[0];return(0,c.useCallback)((function(t){return n({variables:{collectionSlug:(null==t?void 0:t.slug)||"",postId:e.id,status:u.Zj.APPROVED}})}),[e])},h=function(e){var t=(0,s.D)(f),n=i()(t,1)[0];return(0,c.useCallback)((function(t){return n({variables:{collectionSlug:(null==t?void 0:t.slug)||"",postId:e.id,status:u.Zj.REMOVED},optimisticResponse:{manageCollectionPostStatus:{__typename:"Post",id:e.id,statusForCollection:null,collection:null,pendingCollection:null}}}).then((function(e){if(e.errors&&e.errors[0])throw e.errors[0];return e}))}),[e])}},48502:(e,t,n)=>{"use strict";n.d(t,{Zu:()=>b,n_:()=>E,KQ:()=>g,In:()=>h,PB:()=>y});var o=n(63038),i=n.n(o),r=n(21919),l=n(67294),a=n(28655),s=n.n(a),c=n(92471);function u(){var e=s()(["\n  mutation postSetPinnedByCreatorAt($postId: ID!, $isPinned: Boolean!) {\n    postSetPinnedByCreatorAt(targetPostId: $postId, isPinned: $isPinned) {\n      __typename\n      ... on Post {\n        id\n        pinnedByCreatorAt\n      }\n    }\n  }\n"]);return u=function(){return e},e}function d(){var e=s()(["\n  mutation setPinnedAt($postId: ID!, $collectionId: ID!, $pinnedAt: Boolean!) {\n    __typename\n    setPinnedAt(targetPostId: $postId, targetCollectionId: $collectionId, pinnedAt: $pinnedAt) {\n      __typename\n      ... on Post {\n        id\n        collection {\n          id\n        }\n        pendingCollection {\n          id\n        }\n        pinnedAt\n      }\n    }\n  }\n"]);return d=function(){return e},e}var m=(0,c.Ps)(d()),p=(0,c.Ps)(u()),f=n(92661),v=n(50458),g=function(e){var t=e.id,n=e.collection,o=e.pendingCollection,a=e.pinnedAt,s=(n||o||{id:""}).id,c=(0,r.D)(m,{optimisticResponse:{__typename:"Mutation",setPinnedAt:{__typename:"Post",id:t,collection:n,pendingCollection:o,pinnedAt:a?0:Date.now()}}}),u=i()(c,1)[0],d=l.useCallback((function(){return u({variables:{postId:t,collectionId:s,pinnedAt:!a}})}),[t,s,a,u]);return[a,d]},h=function(e){var t=e.id,n=e.pinnedByCreatorAt,o=(0,r.D)(p,{optimisticResponse:{postSetPinnedByCreatorAt:{__typename:"Post",id:t,pinnedByCreatorAt:n?0:Date.now()}}}),a=i()(o,1)[0],s=l.useCallback((function(){return a({variables:{postId:t,isPinned:!n}})}),[t,a,n]);return[n,s]},E=function(e,t){var n=g(e),o=i()(n,2),r=o[0],a=o[1],s=h(e),c=i()(s,2),u=c[0],d=c[1],m=l.useCallback((function(){return"Collection"===t?a():d()}),[t,a,d]);return["Collection"===t?r:u,m]},y=function(e,t){var n="Collection"===e.__typename?e.slug:null,o=(0,f.uk)();return"Collection"===e.__typename?o("ShowCollectionHome",{collectionSlug:n||void 0}):"User"===e.__typename&&e.username?(0,v.AWr)(e,t):""},b=function(e){switch(e.__typename){case"Collection":return"Publication";case"User":return"Author";default:return"Publisher"}}},74302:(e,t,n)=>{"use strict";n.d(t,{Q:()=>o,t:()=>i});var o="This story is also a response to another story. Are you sure you want to delete this story?",i="This story is also a response to another story. Any edits are applied to both."},88417:(e,t,n)=>{"use strict";n.d(t,{$:()=>v});var o=n(63038),i=n.n(o),r=n(67294),l=n(91583),a=n(77355),s=n(70310),c=n(61609),u=n(47230),d=n(93310),m=n(9935),p=n(20113),f=n(87691),v=function(e){var t=e.isVisible,n=e.hide,o=e.onSubmit,v=e.isResponse,g=r.useState(!1),h=i()(g,2),E=h[0],y=h[1],b=r.useState("Spam"),S=i()(b,2),C=S[0],x=S[1],w=r.useCallback((function(e,t){return x(t)}),[]),I="reportStoryTitle";return r.createElement(l.V,{isVisible:t,hide:n,noPortal:v,withCloseButton:!1,customBackgroundColor:v?"rgba(255, 255, 255, 0.97)":"rgba(255, 255, 255, 0.94)"},r.createElement(a.x,{height:"550px",width:v?"100%":"900px",background:v?"none":"white",borderRadius:"4px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",boxShadow:v?"none":"rgba(0, 0, 0, 0.15) 0px 2px 10px",padding:"18px",position:"relative",sm:{boxShadow:"none",background:"none"},xs:{boxShadow:"none",background:"none"}},r.createElement(a.x,{display:"flex",margin:"auto",flexDirection:"column",alignItems:v?"flex-start":"center"},r.createElement(p.X6,{scale:"M",ariaLabelledById:I},"Report ",v?"Response":"Story"),r.createElement(a.x,{display:"flex",flexDirection:"column",width:"100%",paddingRight:"5px",marginBottom:"30px"},r.createElement(a.x,{marginTop:"25px",marginBottom:"30px",padding:"5px 0"},r.createElement(s.E,{onChange:w,value:C,radioStyle:"SUBTLE",options:[{name:"Spam",value:"Spam"},{name:"Harassment",value:"Harassment"},{name:"Rules Violation",value:"Other"}],radioButtonsName:"reportStory",ariaLabelledBy:I})),r.createElement(c.X,{checked:E,onChange:function(){y(!E)}},r.createElement(a.x,{paddingTop:v?"16px":"0"},"Also block the author of this ",v?"response":"story"))),r.createElement(a.x,{display:"flex",justifyContent:"center",marginBottom:"10px"},r.createElement(a.x,{marginRight:"8px"},r.createElement(u.z,{onClick:n},"Cancel")),r.createElement(u.z,{buttonStyle:"ERROR",onClick:function(){o(E,C),n()}},"Report")),r.createElement(a.x,{marginTop:"50px",textAlign:v?"left":"center"},r.createElement(f.F,{scale:"M",tag:"div"},"Report"," ",r.createElement(d.r,{href:"https://medium.com/policy/mediums-copyright-and-dmca-policy-d126f73695",linkStyle:"OBVIOUS",target:"_blank",inline:!0},"copyright infringement")," ","or"," ",r.createElement(d.r,{href:"https://medium.com/policy/mediums-trademark-policy-e3bb53df59a7",linkStyle:"OBVIOUS",target:"_blank",inline:!0},"trademark infringement"),". ",!v&&r.createElement("br",null),"Read"," ",r.createElement(d.r,{href:"https://medium.com/policy/medium-rules-30e5502c4eb4",linkStyle:"OBVIOUS",target:"_blank",inline:!0},"our rules"),"."))),!v&&r.createElement(m.P,{onClick:n,size:"LARGE",absoluteOffset:"18px"})))}},37774:(e,t,n)=>{"use strict";n.d(t,{z:()=>m});var o=n(63038),i=n.n(o),r=n(67294),l=n(6419),a=n(75880),s=n(38352),c=n(88417),u=n(93310),d=n(68894),m=function(e){var t=e.hidePopover,n=e.targetUserId,o=e.postId,m=e.viewerId,p=e.shouldShowShortenedCopy,f=void 0!==p&&p,v=(0,a.Pd)({id:n}).viewerEdge,g=!(null==v||!v.isBlocking),h=(0,d.O)(!1),E=i()(h,3),y=E[0],b=E[1],S=E[2];return r.createElement(r.Fragment,null,r.createElement(l.H,{targetAuthorId:n,targetPostId:o,isBlocking:g,onOptimisticComplete:function(){S(),t()},viewerId:m},(function(e){var t=e.mutate;return r.createElement(c.$,{onSubmit:t,isVisible:y,hide:S})})),r.createElement(s.Sl,null,r.createElement(u.r,{onClick:function(){b()}},f?"Report":"Report this story")))}},43303:(e,t,n)=>{"use strict";function o(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,r=function(){};return{s:r,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,l=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw l}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}n.d(t,{B:()=>r});var r=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(){var e,n=o(t);try{for(n.s();!(e=n.n()).done;)(0,e.value)()}catch(e){n.e(e)}finally{n.f()}}}}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/9609.8c9e560c.chunk.js.map